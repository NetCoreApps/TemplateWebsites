<!--
title: Products
-->

<a id="back" href="javascript:history.back()">&#8592; Back</a>

{{ `select p.Id, 
           ProductName,
           c.CategoryName Category,
           s.CompanyName Supplier, 
           QuantityPerUnit, 
           ${sqlCurrency("UnitPrice")} UnitPrice, 
           UnitsInStock, UnitsOnOrder, ReorderLevel   
      from Product p
           inner join Category c on p.CategoryId = c.Id
           inner join Supplier s on p.SupplierId = s.Id
     where Discontinued = 0` 
  | assignTo: sql }}

{{ id           | endIfEmpty | use('p.Id = @id')                      | addTo: filters }}
{{ category     | endIfEmpty | use('c.CategoryName = @category')      | addTo: filters }}
{{ supplier     | endIfEmpty | use('s.CompanyName = @supplier')       | addTo: filters }}
{{ nameContains | endIfEmpty | use('ProductName LIKE @name')          | addTo: filters }}
{{#if filters}} {{ `${sql} and ${join(filters, ' and ')}` | assignTo: sql }} {{/if}}

{{ sql          | dbSelect({ id, category, supplier, name: `%${nameContains}%` }) 
                | htmlDump({ className: "table table-striped" }) }}
